---
import type { Producto } from "../types";

interface Props {
  products: Producto[];
  lang?: "es" | "pt";
  carouselId?: string;
}

const {
  products = [],
  lang = "es",
  carouselId = "product-carousel",
} = Astro.props;
---

<div class="product-carousel-wrapper">
  {
    products.length > 0 ? (
      <div
        class="product-carousel-container"
        id={carouselId}
        data-products={JSON.stringify(products)}
      >
        <div
          class="product-carousel-track"
          id={`${carouselId}-track`}
        >
          {products.map((product) => (
            <div
              class="product-card"
              data-product-id={product.id}
            >
              {product.imagen_saco?.url && (
                <div class="product-image-wrapper">
                  <img
                    src={(() => {
                      // Modify Prismic URL to load image at container size (415x415) to prevent layout shift
                      let imageUrl = product.imagen_saco.url;
                      const urlParts = imageUrl.split("?");
                      const baseUrl = urlParts[0];
                      const existingParams = urlParts[1]
                        ? urlParts[1].split("&")
                        : [];
                      const filteredParams = existingParams.filter(
                        (param) =>
                          !param.startsWith("w=") && !param.startsWith("h=")
                      );
                      filteredParams.push("w=415", "h=415", "fit=crop");
                      return `${baseUrl}?${filteredParams.join("&")}`;
                    })()}
                    alt={product.imagen_saco.alt || product.nombre}
                    class="product-image"
                    loading="lazy"
                    width="415"
                    height="415"
                  />
                  {product.codigo && (
                    <div class="product-code-layer">
                      <span class="product-code-text">{product.codigo}</span>
                    </div>
                  )}
                </div>
              )}
              {/* <div class="product-info">
              <h3 class="product-name">{product.nombre}</h3>
              {product.claim && (
                <p class="product-claim">{product.claim}</p>
              )}
              <button
                class="btn btn-primary product-view-btn"
                data-product-id={product.id}
                aria-label={`Ver detalles de ${product.nombre}`}
              >
                {lang === 'es' ? 'Ver detalles' : 'Ver detalhes'}
              </button>
            </div> */}
            </div>
          ))}
        </div>
        {products.length > 0 && (
          <div class="carousel-controls">
            <button
              class="carousel-button carousel-button-prev"
              aria-label="Anterior"
              id={`${carouselId}-prev`}
            >
              <img
                src="/icon-slidder_left.svg"
                alt=""
                width="48"
                height="48"
              />
            </button>
            <button
              class="carousel-button carousel-button-next"
              aria-label="Siguiente"
              id={`${carouselId}-next`}
            >
              <img
                src="/icon-slidder_right.svg"
                alt=""
                width="48"
                height="48"
              />
            </button>
          </div>
        )}
      </div>
    ) : (
      <div class="product-carousel-empty">
        <p>
          {lang === "es"
            ? "No se encontraron productos con los filtros seleccionados."
            : "Nenhum produto encontrado com os filtros selecionados."}
        </p>
      </div>
    )
  }
</div>

<script define:vars={{ productsJson: JSON.stringify(products), carouselId }}>
  const CAROUSEL_ID = carouselId || "product-carousel";
  let currentProducts = JSON.parse(productsJson);
  let carouselTrack = null;
  let scrollPosition = 0;

  function updateCarousel(newProducts, isFiltered = false) {
    try {
      console.log(
        "üîÑ [Carousel] Updating with products:",
        newProducts.length,
        "isFiltered:",
        isFiltered
      );

      if (!Array.isArray(newProducts)) {
        console.error(
          "‚ùå [Carousel] newProducts is not an array:",
          newProducts
        );
        return;
      }

      currentProducts = newProducts;

      const carouselElement = document.getElementById(CAROUSEL_ID);
      const trackElement = document.getElementById(`${CAROUSEL_ID}-track`);

      if (!carouselElement || !trackElement) {
        console.error("‚ùå [Carousel] Carousel elements not found:", {
          carouselId: CAROUSEL_ID,
          carouselElement: !!carouselElement,
          trackElement: !!trackElement,
        });
        return;
      }

      // Update data attribute
      carouselElement.dataset.products = JSON.stringify(newProducts);

      // Calculate container size BEFORE clearing content
      // We need to know the actual rendered size to load images at the correct size
      // This prevents layout shift by matching image size to container size from the start
      const isMobile = window.innerWidth <= 767;
      const isDesktop = window.innerWidth >= 1024;
      let containerSize = 415; // Default fallback

      // Try to get actual size from existing cards before clearing
      // This is the most accurate way to get the real container size
      const existingCard = trackElement.querySelector(".product-card");
      if (existingCard) {
        const cardWidth = existingCard.offsetWidth;
        if (cardWidth > 0) {
          // Image container is slightly smaller due to padding (var(--spacing-4) = 16px on each side = 32px total)
          containerSize = Math.max(280, Math.floor(cardWidth - 32));
          console.log(
            "üìê [Carousel] Using existing card size:",
            cardWidth,
            "px ‚Üí container:",
            containerSize,
            "px"
          );
        }
      } else {
        // Fallback: calculate based on viewport/layout if no existing cards
        if (isMobile) {
          containerSize = Math.floor(window.innerWidth - 32);
        } else if (isDesktop) {
          const trackWidth =
            trackElement.clientWidth ||
            trackElement.offsetWidth ||
            window.innerWidth;
          containerSize = Math.max(280, Math.floor(trackWidth / 3 - 32));
        } else {
          // Tablet: 2 columns
          const trackWidth =
            trackElement.clientWidth ||
            trackElement.offsetWidth ||
            window.innerWidth;
          containerSize = Math.max(280, Math.floor(trackWidth / 2 - 32));
        }
        console.log(
          "üìê [Carousel] Calculated container size (fallback):",
          containerSize,
          "px"
        );
      }

      // ‚úÖ SECURITY: Clear and rebuild HTML using DOM methods instead of innerHTML
      // Clear existing content
      trackElement.innerHTML = "";

      // Helper function to escape HTML
      function escapeHtml(text) {
        const div = document.createElement("div");
        div.textContent = text;
        return div.innerHTML;
      }

      // Build DOM elements safely
      newProducts.forEach((product) => {
        const card = document.createElement("div");
        card.className = "product-card";
        card.setAttribute("data-product-id", product.id);
        // Apply inline styles immediately to prevent layout shift
        card.style.background = "transparent";
        card.style.borderRadius = "0";
        card.style.overflow = "visible";
        card.style.boxShadow = "none";
        card.style.display = "flex";
        card.style.flexDirection = "column";
        card.style.height = "100%";
        card.style.minWidth = "280px";

        if (product.imagen_saco?.url) {
          const wrapper = document.createElement("div");
          wrapper.className = "product-image-wrapper";
          wrapper.style.position = "relative";
          wrapper.style.width = "100%";
          wrapper.style.aspectRatio = "1";
          wrapper.style.overflow = "visible";
          wrapper.style.backgroundColor = "transparent";
          wrapper.style.display = "flex";
          wrapper.style.alignItems = "center";
          wrapper.style.justifyContent = "center";

          const img = document.createElement("img");
          // Modify Prismic URL to load image at calculated container size to prevent layout shift
          let imageUrl = product.imagen_saco.url;
          // Remove existing size parameters and add correct size
          const urlParts = imageUrl.split("?");
          const baseUrl = urlParts[0];
          const existingParams = urlParts[1] ? urlParts[1].split("&") : [];
          // Filter out existing w and h parameters
          const filteredParams = existingParams.filter(
            (param) => !param.startsWith("w=") && !param.startsWith("h=")
          );
          // Add correct size parameters matching calculated container size
          filteredParams.push(
            `w=${containerSize}`,
            `h=${containerSize}`,
            "fit=crop"
          );
          imageUrl = `${baseUrl}?${filteredParams.join("&")}`;

          img.src = imageUrl;
          img.alt = product.imagen_saco.alt || product.nombre || "";
          img.className = "product-image";
          img.loading = "lazy";
          // Set intrinsic dimensions to match calculated container size
          // This reserves the correct space before image loads, preventing layout shift
          img.width = containerSize;
          img.height = containerSize;
          // Apply inline styles immediately to prevent flash of unstyled content
          img.style.width = "100%";
          img.style.height = "100%";
          img.style.objectFit = "contain";
          img.style.padding = "var(--spacing-4)";

          wrapper.appendChild(img);

          if (product.codigo) {
            const codeLayer = document.createElement("div");
            codeLayer.className = "product-code-layer";
            codeLayer.style.position = "absolute";
            codeLayer.style.top = "20%";
            codeLayer.style.left = "25%";
            codeLayer.style.backgroundImage = "url('/images/layer_filter.png')";
            codeLayer.style.backgroundRepeat = "no-repeat";
            codeLayer.style.backgroundPosition = "center";
            codeLayer.style.backgroundSize = "100% 100%";
            codeLayer.style.width = "140px";
            codeLayer.style.height = "48px";
            codeLayer.style.zIndex = "1";
            codeLayer.style.display = "flex";
            codeLayer.style.alignItems = "center";
            codeLayer.style.justifyContent = "center";
            codeLayer.style.pointerEvents = "none";

            const codeText = document.createElement("span");
            codeText.className = "product-code-text";
            codeText.textContent = product.codigo;
            codeText.style.color = "#ffffff";
            codeText.style.fontWeight = "700";
            codeLayer.appendChild(codeText);
            wrapper.appendChild(codeLayer);
          }

          card.appendChild(wrapper);
        }

        trackElement.appendChild(card);
      });

      // Apply mobile/desktop specific styles after HTML update
      // isMobile and isDesktop already declared above
      if (isMobile) {
        // Mobile: ensure slider behavior is maintained - force styles immediately
        trackElement.style.display = "flex";
        trackElement.style.flexDirection = "row";
        trackElement.style.width = "100%";
        trackElement.style.overflowX = "auto";
        trackElement.style.overflowY = "hidden";
        trackElement.style.gridTemplateColumns = "none";

        // Force card widths to ensure only one is visible
        const cards = trackElement.querySelectorAll(".product-card");
        const cardWidth = `calc(100vw - var(--spacing-8))`;
        cards.forEach((card) => {
          if (card instanceof HTMLElement) {
            card.style.flexShrink = "0";
            card.style.width = cardWidth;
            card.style.minWidth = cardWidth;
            card.style.maxWidth = cardWidth;
          }
        });
      }

      // Center filtered results only if filters are active
      if (isFiltered) {
        // Wait for DOM to update before calculating scroll position
        setTimeout(() => {
          centerFilteredResults(trackElement, newProducts.length);
        }, 50);
      } else {
        // Reset styles when showing all products - ensure flex layout for desktop
        setTimeout(() => {
          if (!isMobile) {
            trackElement.style.paddingLeft = "";
            trackElement.style.paddingRight = "";
            trackElement.style.display = "flex";
            trackElement.style.flexDirection = "row";
            trackElement.style.justifyContent = "";
          }
          trackElement.scrollLeft = 0;
          scrollPosition = 0;
        }, 50);
      }

      // Update controls visibility (show if more than 1 product)
      const controls = carouselElement.querySelector(".carousel-controls");
      if (controls) {
        // isMobile already declared above
        controls.style.display = newProducts.length > 1 ? "flex" : "none";
      }

      console.log("‚úÖ [Carousel] Updated with", newProducts.length, "products");
    } catch (error) {
      console.error("‚ùå [Carousel] Error updating carousel:", error);
      console.error("Error stack:", error.stack);
    }
  }

  // Center filtered results in the carousel
  function centerFilteredResults(trackElement, productCount) {
    if (!trackElement || productCount === 0) {
      // Reset padding and display if no products
      trackElement.style.paddingLeft = "";
      trackElement.style.paddingRight = "";
      trackElement.style.display = "";
      trackElement.style.justifyContent = "";
      return;
    }

    const trackWidth = trackElement.clientWidth;
    const isDesktop = window.innerWidth >= 1024;

    // Wait a bit more for grid to layout properly
    setTimeout(() => {
      const firstCard = trackElement.querySelector(".product-card");
      if (!firstCard) {
        trackElement.style.paddingLeft = "";
        trackElement.style.paddingRight = "";
        trackElement.style.display = "";
        trackElement.style.justifyContent = "";
        return;
      }

      const cardWidth = firstCard.offsetWidth;
      let targetScrollPosition = 0;

      if (isDesktop) {
        // Desktop: 3 columns visible in grid
        // Each column takes up (trackWidth / 3) space
        const columnWidth = trackWidth / 3;

        if (productCount === 1) {
          // Center the single product in the middle column (position 2 of 3)
          // Switch to flexbox temporarily to center properly
          trackElement.style.display = "flex";
          trackElement.style.justifyContent = "center";
          trackElement.style.paddingLeft = `${columnWidth}px`;
          trackElement.style.paddingRight = `${columnWidth}px`;
          targetScrollPosition = 0;
        } else {
          // Multiple products: start from center position (position 2) and extend right
          // Position the first product in the center column using padding
          trackElement.style.display = "grid";
          trackElement.style.justifyContent = "";
          const paddingNeeded = columnWidth;
          trackElement.style.paddingLeft = `${Math.max(0, paddingNeeded)}px`;
          trackElement.style.paddingRight = "";
          targetScrollPosition = 0;
        }
      } else {
        // Mobile: maintain slider behavior - ensure flex layout is maintained
        // Don't reset display to avoid falling back to grid layout
        trackElement.style.display = "flex";
        trackElement.style.flexDirection = "row";
        trackElement.style.justifyContent = "";
        trackElement.style.paddingLeft = "";
        trackElement.style.paddingRight = "";
        trackElement.style.width = "100%";
        trackElement.style.overflowX = "auto";
        trackElement.style.overflowY = "hidden";
        targetScrollPosition = 0;
      }

      // Reset scroll position
      scrollPosition = targetScrollPosition;
      trackElement.scrollTo({
        left: targetScrollPosition,
        behavior: "smooth",
      });

      console.log("üéØ [Carousel] Centered results:", {
        productCount,
        targetScrollPosition,
        isDesktop,
        trackWidth,
        cardWidth,
        paddingLeft: trackElement.style.paddingLeft,
      });
    }, 100);
  }

  // Function to update which card is in the center (desktop only) - disabled for 3-column layout
  function updateCenterCard() {
    // No longer needed with 3-column grid layout
    return;
  }

  function scrollCarousel(direction) {
    if (!carouselTrack) return;

    const cardWidth =
      carouselTrack.querySelector(".product-card")?.offsetWidth || 0;
    const gap = 24; // 1.5rem = 24px
    const scrollAmount = cardWidth + gap;

    scrollPosition += direction === "next" ? scrollAmount : -scrollAmount;

    // Clamp scroll position
    const maxScroll = carouselTrack.scrollWidth - carouselTrack.clientWidth;
    scrollPosition = Math.max(0, Math.min(scrollPosition, maxScroll));

    carouselTrack.scrollTo({
      left: scrollPosition,
      behavior: "smooth",
    });

    // Center card detection disabled for 3-column layout
  }

  document.addEventListener("DOMContentLoaded", () => {
    console.log("üé† [Carousel] DOMContentLoaded, initializing...", CAROUSEL_ID);
    carouselTrack = document.getElementById(`${CAROUSEL_ID}-track`);

    if (!carouselTrack) {
      console.error(
        "‚ùå [Carousel] Track element not found:",
        `${CAROUSEL_ID}-track`
      );
      return;
    }

    // Setup navigation buttons
    const prevBtn = document.getElementById(`${CAROUSEL_ID}-prev`);
    const nextBtn = document.getElementById(`${CAROUSEL_ID}-next`);

    if (prevBtn) {
      prevBtn.addEventListener("click", () => scrollCarousel("prev"));
    }
    if (nextBtn) {
      nextBtn.addEventListener("click", () => scrollCarousel("next"));
    }

    // Update controls visibility (show if more than 1 product)
    const carouselElement = document.getElementById(CAROUSEL_ID);
    if (carouselElement) {
      const controls = carouselElement.querySelector(".carousel-controls");
      if (controls) {
        controls.style.display = currentProducts.length > 1 ? "flex" : "none";
      }
    }

    // Center card detection disabled for 3-column layout

    console.log("‚úÖ [Carousel] Initialized");
  });

  // Listen for product updates - update carousel when products change
  document.addEventListener("updateProducts", (e) => {
    console.log("üîÑ [Carousel] Received updateProducts event:", {
      carouselId: CAROUSEL_ID,
      detail: e.detail,
      hasProducts: !!(e.detail && e.detail.products),
      productsCount: e.detail?.products?.length || 0,
    });

    const carouselElement = document.getElementById(CAROUSEL_ID);
    if (!carouselElement) {
      console.error("‚ùå [Carousel] Carousel element not found:", CAROUSEL_ID);
      return;
    }

    // Always update if we have products, regardless of visibility
    // The visibility check was too strict and preventing updates
    if (e.detail && e.detail.products && Array.isArray(e.detail.products)) {
      console.log(
        "üîÑ [Carousel] Updating carousel:",
        CAROUSEL_ID,
        "with",
        e.detail.products.length,
        "products"
      );
      const isFiltered = e.detail.isFiltered || false;
      updateCarousel(e.detail.products, isFiltered);
    } else {
      console.error("‚ùå [Carousel] Invalid event detail:", {
        hasDetail: !!e.detail,
        hasProducts: !!(e.detail && e.detail.products),
        isArray: Array.isArray(e.detail?.products),
        detail: e.detail,
      });
    }
  });

  // Listen for product card clicks
  document.addEventListener("click", (e) => {
    const target = e.target;
    const productCard = target.closest(".product-card");
    const viewBtn = target.closest(".product-view-btn");

    if (productCard || viewBtn) {
      const productId =
        productCard?.getAttribute("data-product-id") ||
        viewBtn?.getAttribute("data-product-id") ||
        "";
      if (productId) {
        const event = new CustomEvent("productClick", {
          detail: { productId },
        });
        document.dispatchEvent(event);
      }
    }
  });
</script>

<style>
  .product-carousel-wrapper {
    margin: var(--spacing-8) 0;
    position: relative;
  }

  @media (max-width: 767px) {
    .product-carousel-wrapper {
      margin: var(--spacing-4) 0;
    }
  }

  .product-carousel-container {
    position: relative;
    padding: var(--spacing-4) 0;
    min-height: 400px;
  }

  @media (min-width: 1024px) {
    .product-carousel-container {
      overflow: hidden;
      width: 100%;
      min-height: 450px;
    }
  }

  @media (max-width: 767px) {
    .product-carousel-container {
      overflow: hidden;
      width: 100%;
      max-width: 100%;
      min-height: 400px;
    }
  }

  .product-carousel-track {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--spacing-6);
    overflow-x: auto;
    scroll-behavior: smooth;
    scrollbar-width: none;
    -ms-overflow-style: none;
    -webkit-overflow-scrolling: touch;
    padding: var(--spacing-2) 0;
    min-height: 350px;
  }

  .product-carousel-track::-webkit-scrollbar {
    display: none;
  }

  /* Mobile: horizontal slider */
  @media (max-width: 767px) {
    .product-carousel-track {
      display: flex;
      flex-direction: row;
      grid-template-columns: none;
      gap: var(--spacing-4);
      overflow-x: auto;
      overflow-y: hidden;
      scroll-snap-type: x mandatory;
      -webkit-overflow-scrolling: touch;
      width: 100%;
    }

    .product-card {
      flex: 0 0 auto;
      flex-shrink: 0;
      width: calc(100vw - var(--spacing-8));
      min-width: calc(100vw - var(--spacing-8));
      max-width: calc(100vw - var(--spacing-8));
      scroll-snap-align: start;
    }
  }

  /* Tablet: 2 columns */
  @media (min-width: 768px) and (max-width: 1023px) {
    .product-carousel-track {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  /* Desktop: 3 visible cards with transparent background */
  @media (min-width: 1024px) {
    .product-carousel-container {
      overflow: hidden;
    }

    .product-carousel-track {
      display: flex;
      flex-direction: row;
      gap: var(--spacing-6);
      overflow-x: auto;
      overflow-y: hidden;
      padding: var(--spacing-4);
      width: 100%;
      scroll-behavior: smooth;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }

    .product-carousel-track::-webkit-scrollbar {
      display: none;
    }

    .product-card {
      background: transparent;
      box-shadow: none;
      border-radius: 0;
      overflow: visible;
      flex: 0 0 calc(33.333% - var(--spacing-4));
      min-width: calc(33.333% - var(--spacing-4));
      max-width: calc(33.333% - var(--spacing-4));
      padding: 0;
    }

    .product-image-wrapper {
      background: transparent;
      overflow: visible;
      position: relative;
    }

    .product-image {
      object-fit: contain;
      object-position: center;
    }
  }

  .product-card {
    background: transparent;
    border-radius: 0;
    overflow: visible;
    box-shadow: none;
    transition: all var(--transition-base);
    cursor: pointer;
    display: flex;
    flex-direction: column;
    height: 100%;
    min-width: 280px;
    padding: 0;
  }

  @media (max-width: 767px) {
    .product-card {
      min-width: calc(100vw - var(--spacing-8));
      width: calc(100vw - var(--spacing-8));
      max-width: calc(100vw - var(--spacing-8));
    }
  }

  .product-card:hover {
    box-shadow: none;
  }

  .product-image-wrapper {
    width: 100%;
    aspect-ratio: 1;
    overflow: visible;
    background-color: transparent;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
  }

  .product-image {
    width: 100%;
    height: 100%;
    object-fit: contain;
    padding: var(--spacing-4);
  }

  .product-code-layer {
    position: absolute;
    top: 20%;
    left: 25%;
    transform: translate(0, 0);
    background-image: url("/images/layer_filter.png");
    background-repeat: no-repeat;
    background-position: center;
    background-size: 100% 100%;
    border-radius: 8px;
    padding: var(--spacing-2) var(--spacing-4);
    z-index: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 140px;
    height: 48px;
    pointer-events: none;
  }

  .product-code-text {
    font-size: 16px;
    font-weight: 700;
    font-family: var(--font-family-primary);
    color: #ffffff !important;
    line-height: 1.2;
    white-space: nowrap;
  }

  .product-info {
    padding: var(--spacing-4);
    display: flex;
    flex-direction: column;
    flex: 1;
    gap: var(--spacing-2);
  }

  .product-name {
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-bold);
    color: var(--color-gray-900);
    margin: 0;
  }

  .product-claim {
    font-size: var(--font-size-sm);
    color: var(--color-gray-600);
    margin: 0;
    flex: 1;
  }

  .product-view-btn {
    margin-top: auto;
    width: 100%;
  }

  .product-carousel-empty {
    text-align: center;
    padding: var(--spacing-12);
    color: var(--color-gray-600);
  }

  .carousel-controls {
    display: flex;
    justify-content: center;
    gap: var(--spacing-4);
    margin-top: var(--spacing-6);
  }

  @media (min-width: 768px) {
    .product-carousel-container {
      position: relative;
    }

    .carousel-controls {
      position: absolute;
      top: 50%;
      left: 0;
      right: 0;
      transform: translateY(-50%);
      justify-content: space-between;
      margin-top: 0;
      gap: 0;
      pointer-events: none;
      padding: 0 var(--spacing-4);
      z-index: 5;
    }

    .carousel-button {
      position: relative;
      pointer-events: auto;
      transform: none;
    }

    .carousel-button:hover {
      transform: scale(1.05);
    }

    .carousel-button:active {
      transform: scale(0.95);
    }
  }

  .carousel-button {
    background: transparent;
    border: none;
    border-radius: var(--radius-full);
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all var(--transition-fast);
    box-shadow: none;
    padding: 0;
  }

  .carousel-button img {
    width: 100%;
    height: 100%;
    display: block;
  }

  .carousel-button:hover {
    opacity: 0.9;
    transform: scale(1.05);
  }

  .carousel-button:active {
    transform: scale(0.95);
  }

  @media (max-width: 767px) {
    .carousel-button:hover {
      transform: translateY(-50%) scale(1.05);
    }

    .carousel-button:active {
      transform: translateY(-50%) scale(0.95);
    }
  }

  .carousel-button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  @media (max-width: 767px) {
    .carousel-controls {
      display: flex;
    }

    .product-carousel-wrapper {
      position: relative;
    }

    .carousel-button {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      z-index: 10;
    }

    .carousel-button-prev {
      left: var(--spacing-2);
    }

    .carousel-button-next {
      right: var(--spacing-2);
    }
  }
</style>
